<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.road_friends.rentalcar.mapper.FastReservationMapper">

    <!--    예약 목록 조회 -->
    <select id="getAllReservations" resultType="com.road_friends.rentalcar.dto.FastReservationDto">
        select reservation_id, car_id, rental_location, rental_datetime,  return_location,  return_datetime
        FROM fast_reservation
    </select>

    <!--    예약 정보 조회 -->
    <select id="getReservationById" resultType="com.road_friends.rentalcar.dto.FastReservationDto">
        select reservation_id, car_id, rental_location, rental_datetime,  return_location,  return_datetime
        FROM fast_reservation WHERE reservation_id=#{reservationId};
    </select>

    <!-- 차량 목록 조회 -->
    <select id="getAllCars" resultType="com.road_friends.rentalcar.dto.CarDto">
        SELECT model_id, car_category, car_status, car_year, car_fuel, car_grade, car_options
        FROM car;
    </select>

    <!-- 특정 차량 조회 -->
    <select id="getCarById" resultType="com.road_friends.rentalcar.dto.CarDto">
        SELECT model_id, car_category, car_status, car_year, car_fuel, car_grade, car_options
        FROM car WHERE car_id = #{carId};
    </select>

    <!--     예약하기     -->
    <insert id="reserve" parameterType="com.road_friends.rentalcar.dto.FastReservationDto">
        INSERT INTO fast_reservation (car_id, rental_location, rental_datetime,  return_location,  return_datetime, user_num)
        VALUES (#{carId},#{rentalLocation},#{rentalDatetime},#{returnLocation},#{returnDatetime},#{userNum});
    </insert>

    <!--    예약취소    -->
    <delete id="deleteReservation">
        DELETE FROM fast_reservation WHERE reservation_id=#{reservationId};
    </delete>
</mapper>