<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf"
    layout:decorate="~{layout/layout}">

<head>
    <title>문의사항 상세</title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/inquiry/inquiry-detail.css}">
    </th:block>
    <th:block layout:fragment="js">
        <script th:src="@{/js/inquiry/inquiry.js}" defer></script>
        <script th:inline="javascript">
            // 메세지 창 띄우기
            window.onload = function() {
                var successMessage = /*[[${successMessage}]]*/ '';
                if (successMessage && successMessage !== "null") {
                    alert(successMessage);
                }
            };
        </script>
    </th:block>
</head>

<body>
    <div class="content" layout:fragment="content">

        <div class="header">
            문의사항 관리
        </div>

        <div class="info">
            <div class="header-sm">
                문의사항 관리 > 문의사항 상세 조회
                <div class="btn-group">
                    <!-- 답변 삭제 -->
                    <form th:action="@{/api/admin/inquiry/{inquiryId}/reply/clear(inquiryId=${inquiry.inquiriesNum})}"
                        method="post">
                        <button type="submit" class="btn-delete-reply" onclick="return confirm('정말 답변을 삭제하시겠습니까?');">
                            답변만 삭제
                        </button>
                    </form>

                    <!-- 문의 상태가 활성화일 경우 (inquiriesStatus == 1) -->
                    <div th:if="${inquiry.inquiriesStatus == 1}">
                        <form th:action="@{/api/admin/inquiry/{inquiryId}/deactivate(inquiryId=${inquiry.inquiriesNum})}" method="post">
                            <!-- status 값을 hidden 필드로 전달 -->
                            <input type="hidden" name="status" value="0" />
                            <button type="submit" class="btn-hide-all" onclick="return confirm('정말 문의를 비활성화 하시겠습니까?');">
                                문의 비활성화
                            </button>
                        </form>
                    </div>

                    <!-- 문의 상태가 비활성화일 경우 (inquiriesStatus == 0) -->
                    <div th:if="${inquiry.inquiriesStatus == 0}">
                        <form th:action="@{/api/admin/inquiry/{inquiryId}/activate(inquiryId=${inquiry.inquiriesNum})}" method="post">
                            <!-- status 값을 hidden 필드로 전달 -->
                            <input type="hidden" name="status" value="1" />
                            <button type="submit" class="btn-activate" onclick="return confirm('정말 문의를 활성화 하시겠습니까?');">
                                문의 활성화
                            </button>
                        </form>
                    </div>

                </div>
            </div>
            <div class="info-box-big">
                <div class="info-box box1">
                    <div class="info-box-title">이용자 정보 및 질문
                        <span class="info-status"
                        th:text="${inquiry.inquiriesStatus == 1 ? '(활성화)' : '(비활성화)'}"
                        th:style="${inquiry.inquiriesStatus == 1 ? 'color: black;' : 'color: red;'}"></span>
                    </div>
                    <div class="info-box-content">
                        <table class="info-box-content-table">
                            <tbody>
                                <tr>
                                    <th>문의 게시글 ID</th>
                                    <td th:text="${inquiry.inquiriesNum}"></td>
                                </tr>
                                <tr>
                                    <th>사용자 번호</th>
                                    <td th:text="${inquiry.userNum}"></td>
                                </tr>
                                <tr>
                                    <th>질문</th>
                                    <td th:text="${inquiry.inquiriesQ}"></td>
                                </tr>
                                <tr>
                                    <th>질문 작성일</th>
                                    <td th:text="${inquiry.inquiriesQCreatedAt}"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="info-box box2">
                    <div class="info-box-title">관리자 정보 및 답변</div>
                    <div class="info-box-content">
                        <table class="info-box-content-table">
                            <tbody>
                                <tr>
                                    <th>문의 게시글 ID</th>
                                    <td th:text="${inquiry.inquiriesNum}"></td>
                                </tr>
                                <tr>
                                    <th>관리자 번호</th>
                                    <td th:text="${inquiry.adminNum}"></td>
                                </tr>
                                <tr>
                                    <th>답변</th>
                                    <td th:text="${inquiry.inquiriesA}"></td>
                                </tr>
                                <tr>
                                    <th>답변 작성일</th>
                                    <td th:text="${inquiry.inquiriesACreatedAt}"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="btn-group">
                <button type="button" class="btn-go-back"
                    th:onclick="'location.href=\'' + @{/api/admin/inquiry} + '\''">
                    목록으로
                </button>
                <div>
                    <!-- 답변 작성 -->
                    <button type="button" class="btn-reply"
                            th:onclick="'location.href=\'' + @{/api/admin/inquiry/{inquiryId}/reply(inquiryId=${inquiry.inquiriesNum})} + '\''">
                        답변 입력
                    </button>
                    <!-- 문의 수정 -->
                    <button type="button" class="btn-update"
                            th:onclick="'location.href=\'' + @{/api/admin/inquiry/{inquiryId}/reply(inquiryId=${inquiry.inquiriesNum})} + '\''">
                        수정
                    </button>
                </div>
            </div>
        </div>


    </div>
</body>

</html>